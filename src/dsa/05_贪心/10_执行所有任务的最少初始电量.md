---
title: 执行所有任务的最少初始电量
category: 算法
tag:
  - 贪心
order: 10
icon: solar:widget-line-duotone
---

## 题目描述

给定一系列任务，每个任务有两个参数：

- 参数一：执行任务需要耗费的电量。
- 参数二：开始执行任务前手机至少需要的电量。

请设计一个算法，计算手机至少需要多少初始电量，才能执行完所有的任务。

**输入：**

一个二维数组，每个元素是一个长度为 `2`的数组，表示一个任务。第一个元素是执行任务需要耗费的电量，第二个元素是开始执行任务前手机至少需要的电量。

**输出：**

手机至少需要的初始电量。

**示例1：**

```
输入：tasks = [[5, 10], [5, 20]]
输出：20
解释：我们可以按照以下顺序执行任务：
1. 先执行第二个任务，此时手机的电量为20-5=15。
2. 先执行第一个任务，此时手机的电量为15-5=10。
```

**示例2：**

```
输入：tasks = [[6, 10], [18, 20]]
输出：26
解释：我们可以按照以下顺序执行任务：
1. 先执行第一个任务，此时手机的电量为26-6=20。
2. 先执行第二个任务，此时手机的电量为20-18=2。
```

## 如何贪心

这道题也是笔试题（无测试链接），可以自己写暴力测试，对拍验证。

这里我们的解法是，倒着推，从后往前推出初始电量至少应该是多少才行。

我们来看这里的贪心策略：**优先处理（倒推）那些“消耗电量 - 至少电量”最大的任务**。

这是因为，这些任务对初始电量的需求最大，如果我们最后处理这些任务，那么对于剩下的任务，我们就可以尽可能地减少初始电量的需求。

解题流程思路如下：

1. 首先，我们将所有的任务**按照“消耗电量 - 至少电量”的值从大到小排序**，优先倒推那些“消耗电量 - 至少电量”最大的任务。

2. 然后，我们遍历排序后的任务列表。对于每个任务，我们有两种选择：

   1. 一是在当前的电量下执行这个任务

   2. 二是增加电量到这个任务的“至少电量”。

   我们选择这两种方案中需要的电量较大的那个。

3. 最后，我们返回需要的初始电量。

```java
public static int atLeast(int[][] jobs) {
	// jobs[i][0] : 耗费
	// jobs[i][1] : 至少电量
	// 消耗电量 - 至少电量，越大的任务，越先倒推
	Arrays.sort(jobs, (a, b) -> (b[0] - b[1]) - (a[0] - a[1]));
	int ans = 0;
	for (int[] job : jobs) {
		ans = Math.max(ans + job[0], job[1]);
	}
	return ans;
}
```

