---
title: 平均值最小累加和
category: 算法
tag:
  - 贪心
order: 9
icon: solar:widget-line-duotone
---

## 题目描述

给定一个长度为 $n$ 的数组 `arr`，每个元素的值在 $0$ 到 $10^5$ 之间。

现在需要将这个数组划分成 $k$ 个非空集合，每个数字只能属于一个集合。

集合的平均值定义为集合内所有元素的和除以集合的元素数量并向下取整。

请设计一个算法，找出一种划分方式，使得这 $k$ 个集合的平均值的总和最小。

输入：

一个长度为 $n$ 的数组 $arr$ ，一个整数 $k$ 。

输出：

$k$ 个集合的平均值的总和的最小值。

备注：

- $1 \le n \le 10^5$
- $0 \le arr[i] \le 10^5$
- $1 \le k \le n$

示例：

```
输入：arr = [1,2,3,4,5], k = 2
输出：4
解释：我们可以将数组划分为[1]和[2, 3, 4, 5]，他们的平均值分别为1和3，总和为4。但如果我们将数组划分为[1,2]和[3,4,5]，他们的平均值分别为1和4，总和为5。
```

## 如何贪心

这道题没有测试链接，属于某个笔试题目。

那如何用贪心来做呢？

这里的贪心策略是：将最小的 $k-1$个数各自作为一个集合，然后将剩余的数作为一个集合。

因为我们希望尽可能地减小每个集合的平均值，而最小的k-1个数的平均值最小，都是它们自身，然后剩余的数作为一个集合，其平均值是这些数的和除以数的数量（让大的那些数自己消耗去，不要和小数在同一个集合中，不然会拉高平均值）。

因此，解题流程思路如下：

1. 首先，我们将数组排序。

2. 然后，我们遍历数组的前 $k-1$ 个元素，将它们的值累加到答案中。这些元素每个都会作为一个单独的集合。

3. 接下来，我们遍历数组的剩余元素，计算它们的和。

4. 最后，我们将这个和除以剩余元素的数量，得到的商就是最后一个集合的平均值，我们将这个平均值加到答案中。

参考代码：

```java
public static int minAverageSum(int[] arr, int k) {
    Arrays.sort(arr);
    int ans = 0;
    for (int i = 0; i < k - 1; i++) { // 最小的k-1个数，每个数独自成一个集合
        ans += arr[i];
    }
    int sum = 0;
    for (int i = k - 1; i < arr.length; i++) {
        sum += arr[i];
    }
    ans += sum / (arr.length - k + 1);
    return ans;
}
```

