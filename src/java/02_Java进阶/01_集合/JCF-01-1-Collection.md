---
title: Collection接口
category: Java集合框架
tag:
  - Collection接口
icon: uis:web-grid-alt
order: 1
---

## 简介

![Collection-Map.png](./images/JCF-01-1-Collection/Collection-Map.png)

`Collection` 接口是 Java 集合框架的根接口，代表一组对象，也就是集合的元素。它位于集合框架的顶层，有一些直接的子接口，如 `Set`、`List`、`Queue`，以及一些间接的子接口和实现类。

> 基本概念：
>
> - 集合（可看成容器）是一组对象，它可以包含重复元素或不包含重复元素，可以是有序或无序的，具体取决于实现类。
> - `Collection` 接口提供了一些基本的查询和修改操作，例如获取元素数量、检查是否为空、判断是否包含某个元素等。
> - 在多线程环境下，如果一个集合正在被修改，同时另一个线程也在对其进行操作，可能会导致不确定的行为。`Collection` 接口并没有规定同步策略，具体实现需要根据需要来确定。

需要注意的是，`Collection` 接口没有直接的实现类，而是由其子接口和实现类（如 `Set`、`List`等接口的实现类）来实现。

# 接口规范

`Collection`接口定义了一系列规范，所有通用的 `Collection` 实现类（通常通过它的一个子接口间接实现 `Collection`，比如`List`、`Set`等）都有一个接受 `Collection` 参数的构造函数。

### 查询操作

查询操作（Query Operations）允许我们查询集合的状态和内容。以下是一些主要的查询操作：

| 方法                         | 描述                                                                                         |
| ---------------------------- | -------------------------------------------------------------------------------------------- |
| `size() : int`               | 返回集合中的元素个数。如果集合包含的元素超过`Integer.MAX_VALUE`，则返回`Integer.MAX_VALUE`。 |
| `isEmpty() : boolean`        | 返回集合是否为空。                                                                           |
| `contains(Object) : boolean` | 判断集合是否包含指定元素。                                                                   |
| `toArray() : Object[]`       | 返回包含集合所有元素的数组。                                                                 |
| `toArray(T[] a) : T[]`       | 返回包含集合所有元素的数组，可以指定数组类型。                                               |

### 修改操作

修改操作（Modification Operations）允许我们修改集合的内容。以下是一些主要的修改操作：

| 方法                                        | 描述                                                                           |
| ------------------------------------------- | ------------------------------------------------------------------------------ |
| `add(E) : boolean`                          | 向集合中添加指定元素。如果集合已经包含该元素且不允许重复，则返回`false`。      |
| `remove(Object) : boolean`                  | 从集合中移除指定元素。如果元素存在且被移除，则返回`true`。                     |
| `addAll(Collection<? extends E>) : boolean` | 将指定集合中的所有元素添加到集合中。如果集合发生变化，返回`true`。             |
| `removeAll(Collection<?>) : boolean`        | 移除集合中与指定集合相同的所有元素。如果集合发生变化，返回`true`。             |
| `removeIf(Predicate<? super E>) : boolean`  | 根据条件移除集合中的元素。如果集合发生变化，返回`true`。                       |
| `retainAll(Collection<?>) : boolean`        | 仅保留集合中与指定集合相同的元素，移除其他元素。如果集合发生变化，返回`true`。 |
| `clear() : void`                            | 移除集合中的所有元素，使集合为空。                                             |

### 批量操作

批量操作（Bulk Operations）允许我们对集合进行批量查询或修改。以下是一些主要的批量操作：

| 方法                                        | 描述                                   |
| ------------------------------------------- | -------------------------------------- |
| `containsAll(Collection<?>) : boolean`      | 判断集合是否包含指定集合中的所有元素。 |
| `addAll(Collection<? extends E>) : boolean` | 将指定集合中的所有元素添加到集合中。   |

### 比较与哈希

比较与哈希（Comparison and Hashing）允许我们比较集合或获取集合的哈希码。以下是一些主要的比较与哈希操作：

| 方法                       | 描述                         |
| -------------------------- | ---------------------------- |
| `equals(Object) : boolean` | 判断集合是否与指定对象相等。 |
| `hashCode() : int`         | 返回集合的哈希码值。         |

### 流与迭代器

流和迭代器（Stream and Spliterator）允许我们遍历集合的元素。以下是一些主要的流与迭代器操作：

| 方法                             | 描述                                          |
| -------------------------------- | --------------------------------------------- |
| `iterator() : Iterator<E>`       | 返回一个迭代器，用于遍历集合中的元素。        |
| `spliterator() : Spliterator<E>` | 创建一个`Spliterator`，用于遍历集合中的元素。 |
| `stream() : Stream<E>`           | 返回一个顺序流，以集合为数据源。              |
| `parallelStream() : Stream<E>`   | 返回一个可能并行的流，以集合为数据源。        |