---
title: 计算字段
category: 数据库
order: 1
tag:
  - 关系型数据库
---

## 定义与应用

计算字段是在运行时通过`SELECT`语句创建的字段，它包含了经过计算、转换或格式化的数据。这些字段并不直接存在于数据库表中，而是通过对表中的实际数据进行操作生成的。

> 字段（ `field` ）基本上与列（ `column` ）的意思相同，经常互换使用。不过数据库列一般称为列，而术语字段通常用在计算字段的连接上。

计算字段的应用场景广泛，包括但不限于：

- **数据组合**：应用程序经常需要显示由多个表列组合而成的数据，例如，我们可能需要在一个字段中同时显示供应商的名字和位置信息，但这两个信息通常存储在不同的表列中。
- **数据格式化**：例如，如果表中的数据是大小写混合的，我们可能需要将所有数据按大写或小写表示。
- **数值计算**：例如，在物品订单中，我们通常存储物品的价格和数量，但不直接存储每个物品的总价格。如果需要打印发票，我们就需要计算物品的总价格（单价乘以数量）。

## 字段拼接 & 别名

字段拼接是计算字段的一种常见应用，它将多个值连接成一个单一的值。在MySQL中，我们可以使用`Concat()`函数来拼接两个或更多的列。

例如，假设我们有一个学生表`stu_tbl`，包含了学生的名字和家乡信息，我们可以生成一个计算字段，按照`name(location)`的格式来列出学生的信息。

```sql
mysql> SELECT Concat(stu_name, ' (', stu_city, ')') AS stu_information
FROM stu_tbl
ORDER BY stu_id;
+-----------------+
| stu_information |
+-----------------+
| 刘一 (北京)     |
| 陈二 (上海)     |
| 张三 (广州)     |
| 李四 (深圳)     |
| 王五 (天津)     |
| 赵六 (成都)     |
| 孙七 (杭州)     |
| 周八 (苏州)     |
| 吴九 (重庆)     |
| 郑十 (武汉)     |
+-----------------+
10 rows in set (0.00 sec)
```

为了方便引用新生成的计算列，我们可以为其设置别名。别名是一个字段或值的替换名，可以使用`AS`关键字来赋予。

例如，上述查询中的`AS stu_information`就为计算字段设置了一个别名`stu_information`。

## 算术计算

计算字段还可以用于对检索出的数据进行算术计算。在MySQL中，我们可以使用基本的算术操作符，如加（`+`）、减（`-`）、乘（`*`）和除（`/`），并可以使用圆括号来改变操作的优先级。

例如，如果我们有一个订单表，需要计算每本书的总价格（单价乘以订购数量），我们可以创建一个计算字段来实现这一需求。

```sql
mysql> SELECT quantity, unitPrice, quantity*unitPrice AS expanded_price
FROM order_tbl;
```

## SELECT的其他用途

除了从表中检索数据，`SELECT`语句还可以用于处理表达式和函数。例如，我们可以使用`SELECT`语句来计算算术表达式的结果，或者调用函数。

```sql
mysql> SELECT 20*18;
+-------+
| 20*18 |
+-------+
|   360 |
+-------+
1 row in set (0.00 sec)
mysql> SELECT now();
+---------------------+
| now()               |
+---------------------+
| 2023-01-01 01:01:01 |
+---------------------+
1 row in set (0.00 sec)
```