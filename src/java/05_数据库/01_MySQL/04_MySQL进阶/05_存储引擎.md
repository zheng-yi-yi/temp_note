---
title: 存储引擎
category: 数据库
order: 5
tag:
- 关系型数据库
---

## MySQL表类型

MySQL支持多种表类型：

1. **InnoDB**：MySQL的默认存储引擎。它提供了事务安全（ACID兼容）表，支持行级锁定和外键。

2. **MyISAM**：MySQL的早期默认存储引擎。它提供了全文搜索索引，但不支持事务处理。

3. **MEMORY**：这种类型的表使用计算机的物理内存进行存储，数据的读写速度非常快。但是，当MySQL服务器关闭或者重启时，表中的数据会丢失。

4. **CSV**：这种类型的表将数据存储为纯文本格式，可以直接用文本编辑器查看和编辑。

5. **ARCHIVE**：这种类型的表用于存储大量的数据，但只支持INSERT和SELECT操作。

6. **FEDERATED**：这种类型的表用于在不同的MySQL数据库之间建立链接。

7. **BLACKHOLE**：这种类型的表会接受但不存储数据，查询总是返回空（或无）。

## 对比

我们重点关注MyISAM、InnoDB、MEMORY：

| 特性           | MyISAM                     | InnoDB                     | MEMORY                 |
| -------------- | -------------------------- | -------------------------- | ---------------------- |
| 事务支持       | 不支持                     | 支持                       | 不支持                 |
| 锁级别         | 表级锁，不支持外键         | 行级锁，支持外键           | 表级锁                 |
| 数据存储位置   | 数据文件和索引文件分开存储 | 数据文件和索引文件一起存储 | 存储在内存中           |
| 崩溃后的安全性 | 中等，可能需要修复表       | 高，支持事务的ACID特性     | 低，重启或崩溃数据丢失 |
| 全文索引       | 支持                       | 5.6版本后支持              | 不支持                 |
| 空间使用效率   | 高                         | 低                         | 高                     |
| 插入数据速度   | 快                         | 慢                         | 最快                   |
| 查询速度       | 快                         | 慢                         | 最快                   |
| CPU使用率      | 低                         | 高                         | 高                     |

> 注意，这只是一个大致的比较，实际性能和特性可能会因为MySQL的版本和配置的不同而有所差异。

我们小结一下：

MyISAM存储引擎在MySQL中提供了高速存储和检索，以及全文搜索能力。然而，它不支持事务和外键，这使得它在需要高级事务处理的系统中不是一个好的选择。

InnoDB存储引擎提供了事务安全（ACID兼容）的存储，以及外键约束等高级数据库功能。它的设计目标是处理大量数据的最大性能和并发性，同时保证数据的安全性。虽然InnoDB的写处理效率略低于MyISAM，并且会占用更多的磁盘空间，但是它的事务安全性和崩溃恢复能力使得它在需要这些功能的系统中是一个更好的选择。

MEMORY存储引擎创建的表存在内存中，提供了非常快速的访问速度。然而，它们的数据在MySQL服务关闭时会丢失，但表结构还在，因此它们主要用于临时数据的存储。MEMORY存储引擎的表使用HASH索引，使得它们在处理大量数据时非常高效。

## 如何选择

- `InnoDB`：如果你的应用需要支持事务，或者应用有大量的并发读写操作，应用需要在系统崩溃后能够恢复数据，那可以选择InnoDB。
- `MyISAM`：如果你的应用只是简单的CRUD操作，并不需要事务，或者需要高速的读写性能，那可以选择MyISAM。
- `Memory`：如果你的数据主要是临时的，比如记录用户的在线状态，那么你可以选择MEMORY存储引擎。