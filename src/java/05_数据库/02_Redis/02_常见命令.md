---
title: 常见命令
category: Redis
order: 2
tag:
  - 内存数据库
  - NoSQL
---

### 键操作

| 指令              | 含义                                                         |
| ----------------- | ------------------------------------------------------------ |
| `dbsize`          | 查看当前数据库的 key 的数量                                  |
| `keys *`          | 查看当前库所有 key                                           |
| `exists key`      | 判断某个 key 是否存在                                        |
| `type key`        | 查看 key 的类型是哪个                                        |
| `del key`         | 删除指定的 key                                               |
| `unlink key`      | 根据 value 选择非阻塞删除（先将 keys 从 keysapce 元数据中删除，真正的删除会在后续异步操作） |
| `expire key time` | 给指定的 key 设置过期时间（time 以秒为单位），当 key 过期时(生存时间为 0 )，它会被自动删除 |
| `ttl key`         | 查看 key 还有多少秒过期，-1 表示永不过期，-2 表示已过期      |
| `select num`      | 选择数据库，num 代表从 0-16，默认是 0                        |
| `flushdb`         | 清空当前库                                                   |
| `flushall`        | 清空所有库                                                   |

### String

| 指令                             | 含义                                                         |
| -------------------------------- | ------------------------------------------------------------ |
| `set`                            | 添加键值对，如果 key 已经存在则覆盖 value                    |
| `get`                            | 查看对应键值                                                 |
| `append`                         | 追加到原值的末尾                                             |
| `strlen`                         | 获得值的长度                                                 |
| `setnx`                          | 只有 key 不存在时，才加入该 key 的值                         |
| `incr`                           | 将 key 中储存的数字值增 1，只能对数字值操作，如果为空，新增值为 1 |
| `decr`                           | 将 key 中储存的数字值减 1，只能对数字值操作，如果为空，新增值为 -1 |
| `incrby / decrby <步长>`         | 将 key 中储存的数字值增减。自定义步长                        |
| `mset ......`                    | 设置一个或者多个 key-value 键值对                            |
| `mget ......`                    | 获取一个或者多个 key-value 键值对                            |
| `msetnx ......`                  | 同时设置一个或多个 key-value 对，当且仅当所有给定 key 都不存在 |
| `getrange <起始位置> <结束位置>` | 获得值的范围，类似 java 中的 substring                       |
| `getrange <起始位置>`            | 用 value 覆写所储存的字符串值，从 <起始位置> 开始(索引从 0 开始) |
| `setrange <位置>`                | 设置指定区间范围内的值                                       |
| `setex <过期时间/秒>`            | 设置键值的同时，设置过期时间，单位秒                         |
| `psetex <过期时间/毫秒>`         | 设置键值的同时，设置过期时间，单位毫秒                       |
| `getset`                         | 以新换旧，设置了新值同时获得旧值                             |
| `set user:1 value`（json数据）   | 存储对象                                                     |


### List

| 指令                   | 含义                                                         |
| ---------------------- | ------------------------------------------------------------ |
| `lpush/rpush ...`      | 从左边/右边插入一个或多个值，左右也就是首尾                  |
| `lrange`               | 按照索引下标获得元素(从左到右，先进后出)                     |
| `lrange 0 -1`          | 如果 start 是 0，stop 是 -1，代表获取所有元素                |
| `lindex`               | 按照索引下标获得元素(从左到右)（-1 代表最后一个，0 代表是第一个） |
| `lpop/rpop`            | 从左边/右边吐出一个值。吐出后该值就不存在 key 中             |
| `rpoplpush`            | 列表右边吐出一个值，插到列表左边，其中 key1 是 rpop 的 key，key2 是 lpush 的 key |
| `llen`                 | 获得列表长度                                                 |
| `linsert before/after` | 在元素某个值的前面/后面插入新值，如果 value 有多个，则插入最前面的那个 |
| `lrem`                 | 从左边删除 n 个 value(从左到右)，如果有多个一样的 lement，则删除列表最前面的的 |
| `lset`                 | 将列表 key 下标为 index 的值替换成 value                     |
| `ltrim key`            | 对一个列表进行修剪(trim)，只保留指定列表中区间内的元素，不在指定区间之内的元素都将被删除 |


### Set

| 指令          | 含义                                                         |
| ------------- | ------------------------------------------------------------ |
| `sadd ...`    | 将一个或多个 member 元素加入到集合 key 中，已经存在的 member 元素将被忽略 |
| `smembers`    | 取出该集合的所有值                                           |
| `sismember`   | 判断集合是否为含有该值，有 1，没有 0                         |
| `scard`       | 返回该集合的元素个数                                         |
| `srem ...`    | 删除集合中的某个元素                                         |
| `spop`        | 随机从该集合中吐出一个值，key 里就没有该值了                 |
| `srandmember` | 随机从该集合中取出 n 个值。不会从集合中删除                  |
| `smove`       | 把集合中一个值从一个集合移动到另一个集合，其中 key1 为要获取的集合，key2 为放入的集合 |
| `sinter`      | 返回两个集合的交集元素                                       |
| `sunion`      | 返回两个集合的并集元素                                       |
| `sdiff`       | 返回两个集合的差集元素(key1 中的，不包含 key2 中的)          |


### Hash

| 指令       | 含义                                                         |
| ---------- | ------------------------------------------------------------ |
| `hset ...` | 给集合 key 的 filed 键赋值 value，批量也可以，4.0 之前是 hmset，现在 hset 也可以批量添加 |
| `hget`     | 从 key 集合取出 value                                        |
| `hexists`  | 查看哈希表 key 中，给定域 field 是否存在                     |
| `hkeys`    | 列出该 hash 集合的所有 field                                 |
| `hvals`    | 列出该 hash 集合的所有 value                                 |
| `hincrby`  | 为哈希表 key 中的域 field 的值加上增量                       |
| `hsetnx`   | 将哈希表 key 中的域 field 的值设置为 value ，当且仅当域 field 不存在 |


### ZSet

| 指令                                                 | 含义                                                         |
| ---------------------------------------------------- | ------------------------------------------------------------ |
| `zadd ...`                                           | 将一个或多个 member 元素及其 score 值加入到有序集 key 当中   |
| `zrange [withscores]`                                | 返回有序集 key 中，下标在 star t和 stop 之间的元素，带 WITHSCORES，可以让分数一起和值(从小到大)返回到结果集 |
| `zrevrange [withscores]`                             | 同上，改为从大到小排列                                       |
| `zrangebyscore [withscores] [limit offset count]`    | 返回有序集 key 中，所有 score 值介于 min 和 max 之间(包括等于 min 或 max )的成员。 有序集成员按 score 值递增(从小到大)次序排列 |
| `zrevrangebyscore [withscores] [limit offset count]` | 同上，改为从大到小排列                                       |
| `zincrby`                                            | 为元素的 score 加上增量                                      |
| `zrem`                                               | 删除该集合下，指定值的元素                                   |
| `zcount`                                             | 统计该集合，分数区间内的元素个数                             |
| `zrank`                                              | 返回该值在集合中的排名，从 0 开始                            |
| `zrevrank`                                           | 返回有序集中成员的排名。其中有序集成员按分数值递减(从大到小)排序 |
